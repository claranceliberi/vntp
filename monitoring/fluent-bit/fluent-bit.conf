[SERVICE]
    Flush        5
    Daemon       off
    Log_Level    info
    Parsers_File parsers.conf
    HTTP_Server  On
    HTTP_Listen  0.0.0.0
    HTTP_Port    2020

# Docker Container Logs - All containers with intelligent filtering
[INPUT]
    Name              tail
    Path              /var/lib/docker/containers/*/*-json.log
    Parser            docker
    Tag               docker.*
    Refresh_Interval  5
    Read_from_Head    true
    Docker_Mode       On
    Docker_Mode_Flush 4

# Add resource attributes and forward to SigNoz OTEL Collector
[FILTER]
    Name modify
    Match docker.oracle
    Add service.name oracle-service
    Add service.version 1.0.0
    Add deployment.environment docker
    Add log.source fluent-bit

[FILTER]
    Name modify
    Match docker.imisanzu
    Add service.name imisanzu-service
    Add service.version 1.0.0
    Add deployment.environment docker
    Add log.source fluent-bit

[FILTER]
    Name modify
    Match docker.postgres-oracle
    Add service.name postgres-oracle
    Add service.version 15-alpine
    Add deployment.environment docker
    Add log.source fluent-bit

[FILTER]
    Name modify
    Match docker.postgres-imisanzu
    Add service.name postgres-imisanzu
    Add service.version 15-alpine
    Add deployment.environment docker
    Add log.source fluent-bit

[FILTER]
    Name modify
    Match docker.redis
    Add service.name redis
    Add service.version 7-alpine
    Add deployment.environment docker
    Add log.source fluent-bit

# Output to SigNoz OTEL Collector
[OUTPUT]
    Name                 opentelemetry
    Match                docker.*
    Host                 host.docker.internal
    Port                 4318
    Logs_uri             /v1/logs
    Log_response_payload True
    Tls                  off
    Tls.verify           off